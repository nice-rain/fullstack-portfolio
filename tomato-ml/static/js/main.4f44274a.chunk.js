(this["webpackJsonprl-ml-tomato-react"]=this["webpackJsonprl-ml-tomato-react"]||[]).push([[0],[,,,,function(e,t,a){e.exports=a(11)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(3),r=a.n(o),c=(a(9),a(1));a(10);var i=function(){var e=Object(n.useState)(""),t=Object(c.a)(e,2),a=t[0],o=t[1],r=Object(n.useRef)(null),i=Object(n.useState)([]),s=Object(c.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(""),p=Object(c.a)(d,2),f=p[0],h=p[1],E=Object(n.useState)(""),g=Object(c.a)(E,2),b=g[0],v=g[1],w=Object(n.useState)(!1),y=Object(c.a)(w,2),S=y[0],j=y[1],O=["Early Blight","Leaf Miner","Powdery Mildew","Septoria Leaf Spot"],I=function(){return b?b>=80?"green-text":b>50&&b<80?"yellow-text":b<=50?"red-text":void 0:""},k=function(e){var t={endpointRegion:"us-east-1",endpointName:"IC-tomato-1594821424",base64Image:e};fetch("https://api.nicera.in/tomato",{method:"post",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){!function(e){var t=function(e){for(var t=0,a=100*e[0],n=1;n<e.length;n++)e[n]>e[t]&&(t=n,a=100*e[n]);return{labelIndex:t,percent:a}}(e.prediction),a=t.labelIndex,n=t.percent;h(O[a]),v(n),m(e.prediction)}(e)})).catch((function(e){console.log(e)}))};return l.a.createElement("div",{className:"App"},l.a.createElement("header",{className:"App-header"},l.a.createElement("h1",null,"Tomato Leaf Disease Identification")),l.a.createElement("main",{className:"container"},l.a.createElement("section",null,l.a.createElement("p",null,"This application is a proof of concept using a machine learning model (AWS Sagemaker) to predict which disease a tomato leaf contains. It was built over a weekend with a very small data set (~10 images per disease). Because of this, the application has the follow caveats:"),l.a.createElement("ul",null,l.a.createElement("li",null,"Images must be .jpg format"),l.a.createElement("li",null,"Images need to be 200x200 for the most accurate results"),l.a.createElement("li",null,"Images must be one of the follow diseases:",l.a.createElement("ul",null,l.a.createElement("li",null,"Early Blight"),l.a.createElement("li",null,"Septoria Leaf Spot"),l.a.createElement("li",null,"Powdery Mildew"),l.a.createElement("li",null,"Leaf Miner"))))),l.a.createElement("section",{className:"App-container"},l.a.createElement("p",null,l.a.createElement("strong",null,"Please select a photo below to get started:")),l.a.createElement("img",{src:a,className:"plant-image ".concat(b?b>=80?"green-border":b>50&&b<80?"yellow-border":b<=50?"red-border":void 0:"")}),l.a.createElement("form",null,l.a.createElement("input",{type:"file",id:"file-selector",accept:".jpg",ref:r,onChange:function(e){var t=r.current.files[0];if(!t)return o(""),v(""),void j(!1);if(t&&t.type&&-1===t.type.indexOf("image"))console.log("File is not an image.",t.type,t);else{var a=new FileReader;a.addEventListener("load",(function(e){o(e.target.result)})),a.readAsDataURL(t),j(!0)}}}),S&&l.a.createElement("button",{onClick:function(e){e.preventDefault(),console.log("submitting image to API"),j(!1);var t=new FileReader;t.readAsDataURL(r.current.files[0]),t.onload=function(){k(t.result.toString().replace(/^data:(.*,)?/,""))},t.onerror=function(e){console.log("Error: ",e),j(!0)}}},"Submit For Evaluation")),f&&l.a.createElement("h2",null,"The disease is most likely ",l.a.createElement("span",{className:I()},f)),f&&b<=50&&l.a.createElement("p",{className:I()},"The accuracy of this prediction is very low. Try using a different photo."),l.a.createElement("div",null,l.a.createElement("h3",null,"Prediction Data:"),l.a.createElement("table",null,l.a.createElement("tbody",null,u.length?u.map((function(e,t){var a=100*e;return l.a.createElement("tr",{key:"prediction_".concat(t)},l.a.createElement("td",null,O[t]),l.a.createElement("td",null,a.toFixed(3),"%"))})):null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(i,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[4,1,2]]]);
//# sourceMappingURL=main.4f44274a.chunk.js.map